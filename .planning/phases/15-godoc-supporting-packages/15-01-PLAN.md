---
phase: 15-godoc-supporting-packages
plan: 01
type: execute
---

<objective>
Add comprehensive go doc comments to the internal/cli package.

Purpose: Enable `go doc` to generate useful documentation for the CLI layer including App struct, interfaces, and command infrastructure.
Output: All exported types, interfaces, functions, and methods in internal/cli have complete doc comments.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/codebase/CONVENTIONS.md
@.planning/phases/14-godoc-core-packages/14-01-SUMMARY.md

**Package overview:**

- `internal/cli` - Cobra-based CLI commands and application wiring
- Key files: root.go (App struct, interfaces, command setup), errors.go (ExitError)
- Other files: run.go, queue.go, epic.go, raw.go, create_story.go, dev_story.go, code_review.go, git_commit.go
- Current state: Basic package doc exists, needs enhanced documentation for App struct and interfaces

**Go doc comment conventions (from Phase 14):**

- Package comment: First sentence is package summary
- Type/function comment: First sentence is one-line summary
- Document exported items only (unexported items optional)
- Use complete sentences ending in periods
- Reference related types/functions with square brackets: [App]
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance root.go documentation</name>
  <files>internal/cli/root.go</files>
  <action>
Enhance the package-level doc comment with:
- One-line summary (existing is good: "Package cli provides the command-line interface for bmad-automate")
- Brief overview of what the package provides: Cobra commands, dependency injection via App struct
- List of key types: [App], [WorkflowRunner], [StatusReader], [StatusWriter], [ExecuteResult]

For each exported type/interface add/enhance doc comments:

WorkflowRunner interface:

- Document as the interface for executing workflows
- Explain RunSingle for named workflows, RunRaw for direct prompts
- Reference that [workflow.Runner] is the production implementation

StatusReader interface:

- Document as the interface for reading story status
- Explain GetStoryStatus and GetEpicStories methods
- Reference that [status.Reader] is the production implementation

StatusWriter interface:

- Document as the interface for updating story status
- Explain UpdateStatus method
- Reference that [status.Writer] is the production implementation

App struct:

- Document as the main application container
- Explain the dependency injection pattern (all dependencies injected, enables testing)
- Document each field's purpose

NewApp:

- Document as the production constructor
- Note that it wires up all real implementations

NewRootCommand:

- Document as the command tree builder
- List the subcommands it adds

ExecuteResult:

- Document as the result of running the CLI
- Explain ExitCode and Err fields

RunWithConfig:

- Document as the testable core of Execute
- Explain that it accepts a pre-loaded config

Run:

- Document as the fully testable entry point
- Explain that it loads config and calls RunWithConfig

Execute:

- Document as the main entry point called by main()
- Note that it calls os.Exit() and is not testable
  </action>
  <verify>go doc ./internal/cli shows enhanced package overview; go doc ./internal/cli.App shows dependency injection documentation</verify>
  <done>All exported types, interfaces, and functions in root.go have complete doc comments</done>
  </task>

<task type="auto">
  <name>Task 2: Enhance errors.go documentation</name>
  <files>internal/cli/errors.go</files>
  <action>
Enhance doc comments for:

ExitError struct:

- Document as the error type for signaling non-zero exit codes
- Explain that it allows RunE functions to signal exit without os.Exit()
- Note testability benefit (tests can check exit codes without process exit)

Error method:

- Document that it implements the error interface
- Document the format of the error string

NewExitError:

- Document as the constructor for ExitError
- Document the code parameter (pass-through from subprocess or 1 for CLI errors)

IsExitError:

- Document as the type assertion helper
- Explain the return values: (code, true) for ExitError, (0, false) otherwise
- Note usage pattern: check before calling os.Exit()
  </action>
  <verify>go doc ./internal/cli.ExitError shows complete error type docs; go doc ./internal/cli.IsExitError shows helper function docs</verify>
  <done>All exported types and functions in errors.go have complete doc comments</done>
  </task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `go doc ./internal/cli` shows package overview with key types listed
- [ ] `go doc ./internal/cli.App` shows dependency injection documentation
- [ ] `go doc ./internal/cli.WorkflowRunner` shows interface with method docs
- [ ] `go doc ./internal/cli.ExitError` shows testability benefits
- [ ] `golangci-lint run ./internal/cli/...` passes
- [ ] No exported items without doc comments
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- go doc output is informative and useful for package users
- Doc comments follow Go conventions (complete sentences, first sentence is summary)
  </success_criteria>

<output>
After completion, create `.planning/phases/15-godoc-supporting-packages/15-01-SUMMARY.md`
</output>
