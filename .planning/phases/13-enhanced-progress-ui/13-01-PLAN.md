---
phase: 13-enhanced-progress-ui
plan: 01
type: execute
---

<objective>
Add step-level progress visibility during lifecycle execution.

Purpose: Users currently see minimal output during workflow execution. This plan adds real-time progress indicators showing current step and remaining steps.
Output: Lifecycle executor with progress callbacks, run command showing step progress during execution.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context:

@.planning/phases/12-dry-run-mode/12-02-SUMMARY.md

# Key source files:

@internal/lifecycle/executor.go
@internal/cli/run.go
@internal/output/printer.go
@internal/output/styles.go

**Tech stack available:** Go, Cobra, Lipgloss
**Established patterns:** Printer interface for output, callback-based progress reporting
**Constraining decisions:** None - this is additive functionality
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add progress callback to lifecycle executor</name>
  <files>internal/lifecycle/executor.go, internal/lifecycle/executor_test.go</files>
  <action>
Add a ProgressCallback function type and optional callback field to Executor:

```go
// ProgressCallback is called before each workflow step executes.
type ProgressCallback func(stepIndex, totalSteps int, workflow string)
```

Modify NewExecutor to accept an optional callback (use functional options pattern or add SetProgressCallback method).

Update Execute() to:

1. Get steps count before loop
2. Call callback (if set) before each workflow with (i+1, len(steps), step.Workflow)

Add test to verify callback is invoked with correct arguments.
</action>
<verify>go test ./internal/lifecycle/... -v -run TestExecutor passes with new callback test</verify>
<done>ProgressCallback type exists, Executor calls callback before each step with correct index/total/workflow</done>
</task>

<task type="auto">
  <name>Task 2: Update run command with step progress output</name>
  <files>internal/cli/run.go</files>
  <action>
Update the run command to display step progress during execution:

1. Create a progress callback that prints step info:
   - Format: "Step [1/4] create-story" using existing stepHeaderStyle or similar
   - Use app.Printer.StepStart(step, total, workflow) if suitable, or add a new method

2. Pass the callback to the lifecycle executor before calling Execute()

3. The output should look like:

```
Step [1/4] create-story
... (workflow output) ...
Step [2/4] dev-story
... (workflow output) ...
```

Keep existing success/error messaging after execution completes.
</action>
<verify>Run `go build ./... && ./bmad-automate run --dry-run 6-1-test` compiles; manual test with real story shows step progress</verify>
<done>Run command displays "Step [N/M] workflow-name" before each workflow executes</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `go build ./...` succeeds without errors
- [ ] `go test ./internal/lifecycle/...` passes
- [ ] `go test ./...` passes (no regressions)
- [ ] Manual test: `./bmad-automate run <story>` shows step progress
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors introduced
- Run command shows step-by-step progress during lifecycle execution
  </success_criteria>

<output>
After completion, create `.planning/phases/13-enhanced-progress-ui/13-01-SUMMARY.md`
</output>
